# 메모리 관리 전략

# 메모리 관리 배경

각각의 프로세스는 독립된 메모리 공간을 갖고, 운영체제 혹은 다른 프로세스의 메모리 공간에 접근할 수 없는 제한이 걸려 있다. 단지 운영체제만이 운영체제 메모리 영역과 사용자 메모리 영역의 접근에 제약을 받지 않는다.

## Swapping

메모리의 관리를 위해 사용되는 기법. 표준 Swapping 방식으로는 Round-Robin과 같은 스케줄링이 적용된 다중 프로그래밍 환경에서 CPU 할당 시간이 끝난 프로세스의 메모리를 보조 기억장치(HDD, SDD 등)로 내보내고 다른 프로세스의 메모리를 불러 들일 수 있다.

⇒ 이 과정을 Swap이라 한다. 주 기억장치(RAM)으로 불러오는 과정을 Swap-in, 보조 기억장치로 내보내는 과정을 Swap-out이라 한다. Swap에는 큰 디스크 전송시간이 필요하기 때문에 현재에는 메모리 공간이 부족할 때 Swapping이 시작된다.

## 단편화(Fragmentation)

프로세스들이 메모리에 적재되고 제거되는 일이 반복되다 보면 프로세스들이 차지하는 메모리 틈 사이에 사용하지 못할 만큼의 작은 여유 공간들이 늘어나게 되는데, 이러한 현상을 단편화라고 한다.

![Untitled%206d69fa588abd483a934852b64d631cfc/Untitled.png](Untitled%206d69fa588abd483a934852b64d631cfc/Untitled.png)

### 단편화 종류

1. 외부 단편화
: 메모리 공간 중 사용하지 못하게 된 일부분. 물리 메모리(RAM)에서 사이사이 남는 공간들을 모두 합치면 충분한 공간이 되는 부분들이 쪼개어져 분산되어 있는 현상을 말한다.
2. 내부 단편화
: 프로세스가 사용하는 메모리 공간에 포함된 남는 부분. 예를 들어 메모리 분할 자유 공간이 10,000B 있고 Process A가 9,998B를 사용하게 되면 2B라는 차이가 발생하고, 이 현상을 내부 단편화라고 말한다.
- 압축: 외부 단편화를 해소하기 위해 프로세스가 사용하는 공간들을 한 쪽으로 몰아 자유 공간을 확보하는 방법론이지만, 프로세스들의 메모리 주소를 바꾸는 과정에서 오버헤드가 발생하게 되어 작업 효율이 좋지 않다.

![Untitled%206d69fa588abd483a934852b64d631cfc/Untitled%201.png](Untitled%206d69fa588abd483a934852b64d631cfc/Untitled%201.png)

## 페이징(Paging)

하나의 프로세스가 사용하는 메모리 공간이 연속적이어야 한다는 제약을 없애는 메모리 관리 방법이다. 외부 단편화와 압축 작업에서 발생하는 오버헤드를 해소하기 위해 등장한 방법론으로, 물리 메모리는 프레임(Frame)이라는 고정 크기로 구분되어 있고, 논리 메모리(프로세스가 점유하는)는 페이지(Page)라 불리는 고정 크기의 블록으로 구분된다.

### 페이징의 특징

- 장점

페이징 기법을 사용함으로써 논리 메모리는 물리 메모리에 저장될 때 연속으로 저장될 필요가 없고 물리 메모리의 남는 프레임에 적절히 배치됨으로써 외부 단편화를 해결할 수 있는 큰 장점이 있다.

- 단점

내부 단편화 문제의 비중이 늘어나게 된다. 예를 들어 페이지 크기가 1,024B이고 프로세스 A가 3,172B의 메모리를 요구한다면 3개의 페이지 프레임(1,024 * 3 = 3,072)에 100B가 추가로 필요하기 때문에 결국은 4개의 페이지 프레임이 필요하다. 이렇게 되면 마지막 프레임에는 924B의 여유 공간이 남게 되는 내부 단편화 문제가 발생한다.

## 세그먼테이션(Segmentation)

논리 메모리와 물리 메모리를 같은 크기의 블록이 아닌, 서로 다른 크기의 논리적 단위인 세그먼트(Segment)로 분할한다.

사용자가 두 개의 주소로 지정(세그먼트 번호 + 변위) 

세그먼트 테이블에는 각 세그먼트의 기준(세그먼트의 시작 물리 주소)과 한계(세그먼트의 길이)를 저장한다.

- 단점

    서로 다른 크기의 세그먼트들이 메모리에 적재되고 제거되는 일이 반복되다 보면, 자유 공간들이 많은 수의 작은 조각들로 나누어져 못 쓰게 될 수도 있다. → 외부 단편화 발생 가능성

[[운영체제] 8장 메모리 관리 전략](https://blog.naver.com/PostView.nhn?blogId=yeop9657&logNo=220728971005&parentCategoryNo=&categoryNo=123&viewDate=&isShowPopularPosts=true&from=search)